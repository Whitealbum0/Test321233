# üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ OAuth2

## –ß–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

### üîê **–ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π**

#### 1. **"Invalid client" –∏–ª–∏ "unauthorized_client"**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Google –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É "Invalid client"
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `GOOGLE_CLIENT_ID` –≤ `backend/.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Client ID –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ Google Cloud Console
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console –∞–∫—Ç–∏–≤–µ–Ω

#### 2. **"Redirect URI mismatch"**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Google –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É redirect URI
```
**–†–µ—à–µ–Ω–∏–µ:**
- –í Google Cloud Console –¥–æ–±–∞–≤—å—Ç–µ: `http://localhost:8001/api/auth/google/callback`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `GOOGLE_REDIRECT_URI` –≤ `.env` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Google
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–µ–ª–æ–≤

#### 3. **"JWT decode error"**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JWT —Ç–æ–∫–µ–Ω–∞
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `JWT_SECRET_KEY` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª—é—á–∞

### üóÑÔ∏è **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**

#### 1. **MongoDB connection failed**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ MongoDB
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ MongoDB
mongo --eval "db.adminCommand('ping')"

# –ï—Å–ª–∏ MongoDB –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
# Windows: https://www.mongodb.com/try/download/community
# macOS: brew install mongodb-community
# Linux: sudo apt install mongodb

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ MongoDB
mongod
```

#### 2. **Database not found**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
python setup_oauth2.py

# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –≤—Ä—É—á–Ω—É—é
mongo
use ecommerce_local
db.products.insertOne({test: "data"})
```

### üåê **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º**

#### 1. **Port already in use**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 8001 —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8001
netstat -ano | findstr :8001

# –ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
taskkill /PID [PID_NUMBER] /F

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
uvicorn server_oauth:app --port 8002
```

#### 2. **CORS errors**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ frontend –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://localhost:3000`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ `server_oauth.py`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `FRONTEND_URL` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env`

### üé® **–ü—Ä–æ–±–ª–µ–º—ã —Å Frontend**

#### 1. **Module not found: react-query**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –Ω–∞–π–¥–µ–Ω –º–æ–¥—É–ª—å react-query
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd frontend
npm install react-query
# –∏–ª–∏
yarn add react-query
```

#### 2. **OAuth2AuthContext not found**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–∫—Å—Ç OAuth2 –Ω–µ –Ω–∞–π–¥–µ–Ω
```
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `OAuth2AuthContext.js` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `App_OAuth2.js`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è App.js

### üì± **–ü—Ä–æ–±–ª–µ–º—ã —Å Google OAuth2**

#### 1. **Google API not enabled**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Google+ API –Ω–µ –≤–∫–ª—é—á–µ–Ω
```
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Google Cloud Console
2. APIs & Services ‚Üí Library
3. –ù–∞–π–¥–∏—Ç–µ "Google+ API"
4. –ù–∞–∂–º–∏—Ç–µ "Enable"

#### 2. **Quota exceeded**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—ã—à–µ–Ω–∞ –∫–≤–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã –≤ Google Cloud Console
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ–µ–∫—Ç Google Cloud

### üîß **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**

#### 1. **Environment variables not loaded**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env
cat backend/.env

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ: GOOGLE_CLIENT_ID=your-id
# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: GOOGLE_CLIENT_ID = your-id
```

#### 2. **App_OAuth2.js not used**
```
‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è App.js
```
**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd frontend/src
copy App_OAuth2.js App.js
# –∏–ª–∏
cp App_OAuth2.js App.js
```

## üß™ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
# –¢–µ—Å—Ç OAuth2 —Å–∏—Å—Ç–µ–º—ã
python test_oauth2_system.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8001/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ OAuth2 redirect
curl -v http://localhost:8001/api/auth/google
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB
mongo

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π
use ecommerce_local
db.products.count()
db.users.count()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤
db.products.getIndexes()
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# Backend –ª–æ–≥–∏
python server_oauth.py

# Frontend –ª–æ–≥–∏
npm start

# MongoDB –ª–æ–≥–∏
tail -f /var/log/mongodb/mongod.log
```

## üìû **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏**

### –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã**: `python test_oauth2_system.py`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** backend –∏ frontend
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
4. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MongoDB –∑–∞–ø—É—â–µ–Ω**
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Google OAuth2**

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [Google Cloud Console](https://console.cloud.google.com/)
- [MongoDB Installation](https://docs.mongodb.com/manual/installation/)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [React Query Documentation](https://react-query.tanstack.com/)

### –°–æ–∑–¥–∞–Ω–∏–µ issue
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞, —Å–æ–∑–¥–∞–π—Ç–µ issue —Å:
- –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
- –°–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
- –í–µ—Ä—Å–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–∞ —Å–∏—Å—Ç–µ–º—ã

## ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫**

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å:
- [ ] MongoDB –∑–∞–ø—É—â–µ–Ω
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Google OAuth2 –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü–æ—Ä—Ç—ã 3000 –∏ 8001 —Å–≤–æ–±–æ–¥–Ω—ã
- [ ] –§–∞–π–ª—ã OAuth2 —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- [ ] –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–π–¥–µ–Ω

---

**üí° –ü–æ–º–Ω–∏—Ç–µ:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º —Å–≤—è–∑–∞–Ω–æ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π. –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!