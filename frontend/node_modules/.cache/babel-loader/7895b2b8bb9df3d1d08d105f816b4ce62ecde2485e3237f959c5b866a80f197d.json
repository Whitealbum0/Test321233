{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport axios from 'axios';\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\nexport const useProducts = (options = {}) => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    category = null,\n    search = null,\n    minPrice = null,\n    maxPrice = null,\n    sortBy = null,\n    limit = null,\n    autoFetch = true\n  } = options;\n  const fetchProducts = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const params = new URLSearchParams();\n      if (category) params.append('category', category);\n      if (search) params.append('search', search);\n      if (minPrice) params.append('min_price', minPrice);\n      if (maxPrice) params.append('max_price', maxPrice);\n      if (sortBy) params.append('sort_by', sortBy);\n      const response = await axios.get(`${API}/products?${params}`);\n      let productData = response.data;\n      if (limit) {\n        productData = productData.slice(0, limit);\n      }\n      setProducts(productData);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching products:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [category, search, minPrice, maxPrice, sortBy, limit]);\n  useEffect(() => {\n    if (autoFetch) {\n      fetchProducts();\n    }\n  }, [fetchProducts, autoFetch]);\n  const refetch = useCallback(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n  return {\n    products,\n    loading,\n    error,\n    refetch,\n    fetchProducts\n  };\n};\n_s(useProducts, \"my78UUESpi+LszrL5iribx8+CiY=\");\nexport const useCategories = () => {\n  _s2();\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`${API}/categories`);\n        setCategories(response.data.categories);\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching categories:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchCategories();\n  }, []);\n  return {\n    categories,\n    loading,\n    error\n  };\n};\n_s2(useCategories, \"PEFWK5NudK8G7IEShrERrFoV+TY=\");\nexport const useCategoryStats = () => {\n  _s3();\n  const [categoryStats, setCategoryStats] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchCategoryStats = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`${API}/categories/stats`);\n        setCategoryStats(response.data.category_stats);\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching category stats:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchCategoryStats();\n  }, []);\n  return {\n    categoryStats,\n    loading,\n    error\n  };\n};\n_s3(useCategoryStats, \"7WQTujMOC6IeFZptbhXr1hh2rJU=\");","map":{"version":3,"names":["useState","useEffect","useCallback","useMemo","axios","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","useProducts","options","_s","products","setProducts","loading","setLoading","error","setError","category","search","minPrice","maxPrice","sortBy","limit","autoFetch","fetchProducts","params","URLSearchParams","append","response","get","productData","data","slice","err","message","console","refetch","useCategories","_s2","categories","setCategories","fetchCategories","useCategoryStats","_s3","categoryStats","setCategoryStats","fetchCategoryStats","category_stats"],"sources":["C:/Users/Administrator/Desktop/Need-sites-main/frontend/src/hooks/useProducts.js"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from 'react';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\nexport const useProducts = (options = {}) => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const {\n    category = null,\n    search = null,\n    minPrice = null,\n    maxPrice = null,\n    sortBy = null,\n    limit = null,\n    autoFetch = true\n  } = options;\n\n  const fetchProducts = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const params = new URLSearchParams();\n      if (category) params.append('category', category);\n      if (search) params.append('search', search);\n      if (minPrice) params.append('min_price', minPrice);\n      if (maxPrice) params.append('max_price', maxPrice);\n      if (sortBy) params.append('sort_by', sortBy);\n\n      const response = await axios.get(`${API}/products?${params}`);\n      let productData = response.data;\n\n      if (limit) {\n        productData = productData.slice(0, limit);\n      }\n\n      setProducts(productData);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching products:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [category, search, minPrice, maxPrice, sortBy, limit]);\n\n  useEffect(() => {\n    if (autoFetch) {\n      fetchProducts();\n    }\n  }, [fetchProducts, autoFetch]);\n\n  const refetch = useCallback(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n\n  return {\n    products,\n    loading,\n    error,\n    refetch,\n    fetchProducts\n  };\n};\n\nexport const useCategories = () => {\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`${API}/categories`);\n        setCategories(response.data.categories);\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching categories:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCategories();\n  }, []);\n\n  return { categories, loading, error };\n};\n\nexport const useCategoryStats = () => {\n  const [categoryStats, setCategoryStats] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchCategoryStats = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`${API}/categories/stats`);\n        setCategoryStats(response.data.category_stats);\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching category stats:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCategoryStats();\n  }, []);\n\n  return { categoryStats, loading, error };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}